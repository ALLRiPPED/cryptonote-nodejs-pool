var _0x550c=['hget','coin',':telegram','hgetall',':telegram:blocks','sendBlockTelegram','email','Notification\x20disabled\x20for\x20%s:\x20empty\x20email\x20content.',':notifications','sendToAllEmails','sendToMinerEmail','sendEmail','sendToEmail','emailTemplate','existsSync','warn','Email\x20template\x20file\x20not\x20found:\x20%s','readFileSync','utf8','toString','dateFormat','now','POOL_HOST','poolHost','./email.js','./telegram.js','./utils.js','notifications','./exceptionWriter.js','Your\x20email\x20was\x20registered','Worker\x20%WORKER_NAME%\x20connected','Worker\x20%WORKER_NAME%\x20stopped\x20hashing','Worker\x20%WORKER_NAME%\x20banned','Block\x20%HEIGHT%\x20unlocked\x20!','Block\x20%HEIGHT%\x20orphaned\x20!','We\x20sent\x20you\x20a\x20payment\x20!','Your\x20email\x20has\x20been\x20registered\x20to\x20receive\x20pool\x20notifications.','Your\x20worker\x20%WORKER_NAME%\x20has\x20been\x20banned.','Block\x20mined\x20at\x20%HEIGHT%\x20with\x20%REWARD%\x20and\x20%EFFORT%\x20effort\x20on\x20%TIME%.','Block\x20orphaned\x20at\x20height\x20%HEIGHT%\x20:(','A\x20payment\x20of\x20%AMOUNT%\x20has\x20been\x20sent\x20to\x20%ADDRESS%\x20wallet.','Your\x20worker\x20_%WORKER_NAME%_\x20is\x20now\x20connected.','Your\x20worker\x20_%WORKER_NAME%_\x20has\x20stopped\x20submitting\x20hashes\x20on\x20_%LAST_HASH%_.','*Block\x20found\x20at\x20height\x20_%HEIGHT%_\x20by\x20miner\x20_%MINER%_.\x20Waiting\x20maturity.*','*Block\x20mined\x20at\x20_%HEIGHT%_\x20with\x20_%REWARD%_\x20and\x20_%EFFORT%_\x20effort\x20on\x20_%TIME%_.*','*Block\x20orphaned\x20at\x20height\x20_%HEIGHT%_\x20:(*','assign','test','Test\x20notification','emailMessage','This\x20is\x20a\x20test\x20notification\x20from\x20the\x20pool.','telegramMessage','blockFound','blockUnlocked','blockOrphaned','sendToMiner','telegram','enabled','info','channel','replace','error','No\x20telegram\x20channel\x20specified\x20in\x20configuration!','sendMessage','sendToTelegramChannel','Notification\x20disabled\x20for\x20%s:\x20empty\x20telegram\x20message.'];(function(_0xb67384,_0x27295a){var _0x156d7c=function(_0x52a1f8){while(--_0x52a1f8){_0xb67384['push'](_0xb67384['shift']());}};_0x156d7c(++_0x27295a);}(_0x550c,0x1e6));var _0x56ae=function(_0x5b5abe,_0x263f4d){_0x5b5abe=_0x5b5abe-0x0;var _0x41e0e3=_0x550c[_0x5b5abe];return _0x41e0e3;};let fs=require('fs');let emailSystem=require(_0x56ae('0x0'));let telegram=require(_0x56ae('0x1'));let utils=require(_0x56ae('0x2'));let logSystem=_0x56ae('0x3');require(_0x56ae('0x4'))(logSystem);let notificationSettings={'emailTemplate':'email/template.txt','emailSubject':{'emailAdded':_0x56ae('0x5'),'workerConnected':_0x56ae('0x6'),'workerTimeout':_0x56ae('0x7'),'workerBanned':_0x56ae('0x8'),'blockFound':'Block\x20%HEIGHT%\x20found\x20!','blockUnlocked':_0x56ae('0x9'),'blockOrphaned':_0x56ae('0xa'),'payment':_0x56ae('0xb')},'emailMessage':{'emailAdded':_0x56ae('0xc'),'workerConnected':'Your\x20worker\x20%WORKER_NAME%\x20is\x20now\x20connected.','workerTimeout':'Your\x20worker\x20%WORKER_NAME%\x20has\x20stopped\x20submitting\x20hashes\x20on\x20%LAST_HASH%.','workerBanned':_0x56ae('0xd'),'blockFound':'Block\x20found\x20at\x20height\x20%HEIGHT%\x20by\x20miner\x20%MINER%\x20on\x20%TIME%.\x20Waiting\x20maturity.','blockUnlocked':_0x56ae('0xe'),'blockOrphaned':_0x56ae('0xf'),'payment':_0x56ae('0x10')},'telegramMessage':{'workerConnected':_0x56ae('0x11'),'workerTimeout':_0x56ae('0x12'),'workerBanned':'Your\x20worker\x20_%WORKER_NAME%_\x20has\x20been\x20banned.','blockFound':_0x56ae('0x13'),'blockUnlocked':_0x56ae('0x14'),'blockOrphaned':_0x56ae('0x15'),'payment':'A\x20payment\x20of\x20_%AMOUNT%_\x20has\x20been\x20sent.'}};if(config['notifications']){Object[_0x56ae('0x16')](notificationSettings,config['notifications']);}notificationSettings['emailSubject'][_0x56ae('0x17')]=_0x56ae('0x18');notificationSettings[_0x56ae('0x19')][_0x56ae('0x17')]=_0x56ae('0x1a');notificationSettings[_0x56ae('0x1b')][_0x56ae('0x17')]='This\x20is\x20a\x20test\x20notification\x20from\x20the\x20pool.';exports['sendToAll']=function(_0x4cfe67,_0x273d4d){sendToTelegramChannel(_0x4cfe67,_0x273d4d);if(_0x4cfe67===_0x56ae('0x1c')||_0x4cfe67===_0x56ae('0x1d')||_0x4cfe67===_0x56ae('0x1e')){sendBlockTelegram(_0x4cfe67,_0x273d4d);}sendToAllEmails(_0x4cfe67,_0x273d4d);};exports[_0x56ae('0x1f')]=function(_0x69aeb7,_0x5db4b0,_0x4283ce){sendToMinerTelegram(_0x69aeb7,_0x5db4b0,_0x4283ce);sendToMinerEmail(_0x69aeb7,_0x5db4b0,_0x4283ce);};function sendToTelegramChannel(_0x239b12,_0x2b4227){_0x2b4227=setCustomVariables(_0x2b4227);if(config[_0x56ae('0x20')]&&config[_0x56ae('0x20')][_0x56ae('0x21')]){let _0x52a03d=getTelegramMessage(_0x239b12,_0x2b4227);if(!_0x52a03d||_0x52a03d===''){log(_0x56ae('0x22'),logSystem,'Notification\x20disabled\x20for\x20%s:\x20empty\x20telegram\x20message.',[_0x239b12]);return;}let _0x1985b6=config['telegram'][_0x56ae('0x23')][_0x56ae('0x24')](/@/g,'')||'';if(!_0x1985b6){log(_0x56ae('0x25'),logSystem,_0x56ae('0x26'));return;}let _0x5a0a06='@'+_0x1985b6;telegram[_0x56ae('0x27')](_0x5a0a06,_0x52a03d);}}exports[_0x56ae('0x28')]=sendToTelegramChannel;function sendToMinerTelegram(_0x106033,_0x205fd6,_0x31b1ca){_0x31b1ca=setCustomVariables(_0x31b1ca);if(config[_0x56ae('0x20')]&&config[_0x56ae('0x20')][_0x56ae('0x21')]){let _0x1314ae=getTelegramMessage(_0x205fd6,_0x31b1ca);if(!_0x1314ae||_0x1314ae===''){log(_0x56ae('0x22'),logSystem,_0x56ae('0x29'),[_0x205fd6]);return;}redisClient[_0x56ae('0x2a')](config[_0x56ae('0x2b')]+_0x56ae('0x2c'),_0x106033,function(_0x155cce,_0x53682f){if(_0x155cce||!_0x53682f)return;telegram[_0x56ae('0x27')](_0x53682f,_0x1314ae);});}}exports['sendToMinerTelegram']=sendToMinerTelegram;function sendBlockTelegram(_0x588269,_0x3a02e1){_0x3a02e1=setCustomVariables(_0x3a02e1);if(config[_0x56ae('0x20')]&&config[_0x56ae('0x20')][_0x56ae('0x21')]){let _0x4abc77=getTelegramMessage(_0x588269,_0x3a02e1);if(!_0x4abc77||_0x4abc77===''){log(_0x56ae('0x22'),logSystem,_0x56ae('0x29'),[_0x588269]);return;}redisClient[_0x56ae('0x2d')](config[_0x56ae('0x2b')]+_0x56ae('0x2e'),function(_0x42ac8f,_0x16b1ca){if(_0x42ac8f||!_0x16b1ca)return;for(let _0x5ea472 in _0x16b1ca){if(!_0x5ea472)continue;telegram['sendMessage'](_0x5ea472,_0x4abc77);}});}}exports[_0x56ae('0x2f')]=sendBlockTelegram;function sendToAllEmails(_0x3a8e58,_0x40c424){_0x40c424=setCustomVariables(_0x40c424);if(config[_0x56ae('0x30')]&&config['email'][_0x56ae('0x21')]){let _0x479bc4=getEmailSubject(_0x3a8e58,_0x40c424);let _0x45a1e7=getEmailContent(_0x3a8e58,_0x40c424);if(!_0x45a1e7||_0x45a1e7===''){log('info',logSystem,_0x56ae('0x31'),[_0x3a8e58]);return;}redisClient[_0x56ae('0x2d')](config[_0x56ae('0x2b')]+_0x56ae('0x32'),function(_0x140511,_0x1538a4){if(_0x140511||!_0x1538a4)return;for(let _0x11c3b6 in _0x1538a4){let _0x14de77=_0x1538a4[_0x11c3b6];emailSystem['sendEmail'](_0x14de77,_0x479bc4,_0x45a1e7);}});}}exports[_0x56ae('0x33')]=sendToAllEmails;function sendToMinerEmail(_0x468813,_0x2b1f27,_0x2ec755){_0x2ec755=setCustomVariables(_0x2ec755);if(config['email']&&config[_0x56ae('0x30')][_0x56ae('0x21')]){let _0x1843b2=getEmailSubject(_0x2b1f27,_0x2ec755);let _0x824a4f=getEmailContent(_0x2b1f27,_0x2ec755);if(!_0x824a4f||_0x824a4f===''){log(_0x56ae('0x22'),logSystem,_0x56ae('0x31'),[_0x2b1f27]);return;}redisClient[_0x56ae('0x2a')](config[_0x56ae('0x2b')]+_0x56ae('0x32'),_0x468813,function(_0x540530,_0x426950){if(_0x540530||!_0x426950)return;emailSystem['sendEmail'](_0x426950,_0x1843b2,_0x824a4f);});}}exports[_0x56ae('0x34')]=sendToMinerEmail;function sendToEmail(_0x3ae878,_0x1122db,_0x33bdb7){_0x33bdb7=setCustomVariables(_0x33bdb7);if(config[_0x56ae('0x30')]&&config['email'][_0x56ae('0x21')]){let _0x46f0a5=getEmailSubject(_0x1122db,_0x33bdb7);let _0x40cb85=getEmailContent(_0x1122db,_0x33bdb7);if(!_0x40cb85||_0x40cb85===''){log(_0x56ae('0x22'),logSystem,_0x56ae('0x31'),[_0x1122db]);return;}emailSystem[_0x56ae('0x35')](_0x3ae878,_0x46f0a5,_0x40cb85);}}exports[_0x56ae('0x36')]=sendToEmail;function getEmailSubject(_0x39e565,_0x5583a4){let _0x44295a=replaceVariables(notificationSettings['emailSubject'][_0x39e565],_0x5583a4)||'';return _0x44295a;}function getEmailContent(_0x2cc7a0,_0x14b13f){let _0x2b7e7f=notificationSettings[_0x56ae('0x19')][_0x2cc7a0]||'';if(!_0x2b7e7f||_0x2b7e7f==='')return'';let _0x567193=_0x2b7e7f;if(notificationSettings[_0x56ae('0x37')]){if(!fs[_0x56ae('0x38')](notificationSettings[_0x56ae('0x37')])){log(_0x56ae('0x39'),logSystem,_0x56ae('0x3a'),[notificationSettings['emailTemplate']]);}_0x567193=fs[_0x56ae('0x3b')](notificationSettings['emailTemplate'],_0x56ae('0x3c'));_0x567193=_0x567193[_0x56ae('0x24')](/%MESSAGE%/g,_0x2b7e7f);}_0x567193=replaceVariables(_0x567193,_0x14b13f);return _0x567193;}function getTelegramMessage(_0x381c37,_0x1ef87a){let _0x4f41ae={};if(_0x4f41ae){for(let _0x31916f in _0x1ef87a){let _0x3bfce8=_0x1ef87a[_0x31916f][_0x56ae('0x3d')]();_0x3bfce8=_0x3bfce8['replace'](/\*/g,'.');_0x3bfce8=_0x3bfce8[_0x56ae('0x24')](/_/g,'\x20');_0x4f41ae[_0x31916f]=_0x3bfce8;}}let _0x1a180b=replaceVariables(notificationSettings[_0x56ae('0x1b')][_0x381c37],_0x4f41ae)||'';return _0x1a180b;}function setCustomVariables(_0x4c1c0e){if(!_0x4c1c0e)_0x4c1c0e={};_0x4c1c0e['TIME']=utils[_0x56ae('0x3e')](Date[_0x56ae('0x3f')](),'yyyy-mm-dd\x20HH:MM:ss\x20Z');_0x4c1c0e[_0x56ae('0x40')]=config[_0x56ae('0x41')]||'';return _0x4c1c0e;}function replaceVariables(_0x2e1b3a,_0x148f55){if(!_0x2e1b3a)return'';if(_0x148f55){for(let _0x4b38d9 in _0x148f55){_0x2e1b3a=_0x2e1b3a['replace'](new RegExp('%'+_0x4b38d9+'%','g'),_0x148f55[_0x4b38d9]);}_0x2e1b3a=_0x2e1b3a[_0x56ae('0x24')](/  /g,'\x20');}return _0x2e1b3a;}
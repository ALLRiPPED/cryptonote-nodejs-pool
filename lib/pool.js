var _0x1d31=['exec','hset',':workers:','workerBanned','workerTimeout','dateFormat','eval','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20local\x20age\x20=\x20(ARGV[3]\x20-\x20redis.call(\x27hget\x27,\x20KEYS[2],\x20\x27lastBlockFound\x27))\x20/\x201000\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20local\x20score\x20=\x20string.format(\x27%.17g\x27,\x20ARGV[2]\x20*\x20math.exp(age\x20/\x20ARGV[4]))\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20redis.call(\x27hincrbyfloat\x27,\x20KEYS[1],\x20ARGV[1],\x20score)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{score,\x20tostring(age)}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',':scores:roundCurrent',':stats','slushMining','weight','score','hincrbyfloat',':scores:',':roundCurrent',':shares_actual:','zadd',':hashrate','join','hashes','lastShare','expire',':unique_workers:','lastBlockFound','rename',':scores:solo:roundCurrent',':scores:solo:round',':shares_actual:prop:roundCurrent',':shares_actual:prop:round',':shares_actual:solo:roundCurrent','hgetall',':scores:prop:round','solo','hget',':shares_actual:solo:round','Failed\x20to\x20insert\x20share\x20data\x20into\x20redis\x20%j\x20\x0a\x20%j','\x20for\x20difficulty\x20','\x20and\x20round\x20age\x20','keys','reduce',':blocks:candidates','sendToAll','blockFound','Accepted\x20%s\x20share\x20at\x20difficulty\x20%d/%d\x20from\x20%s@%s','construct_block_blob','trusted','Mining\x20pool\x20algorithm:\x20%s\x20variant\x20%d,\x20Hard\x20fork\x20version:\x20%d','valid','fromBuffer','div','rpcDaemon','submitblock','get_block_id','Block\x20%s\x20found\x20at\x20height\x20%d\x20by\x20miner\x20%s@%s\x20-\x20submit\x20result:\x20%j','Rejected\x20low\x20difficulty\x20share\x20of\x20%s\x20from\x20%s@%s','construct_mm_child_block_blob','Failed\x20to\x20construct\x20MM\x20child\x20block:\x20','Child\x20Block\x20%s\x20found\x20at\x20height\x20%d\x20by\x20miner\x20%s@%s\x20-\x20submit\x20result:\x20%j','Error\x20submitting\x20\x20child\x20block\x20at\x20height\x20%d\x20from\x20%s@%s,\x20share\x20type:\x20\x22%s\x22\x20-\x20%j','\x20200\x20OK\x0aContent-Type:\x20text/plain\x0aContent-Length:\x2020\x0a\x0aMining\x20server\x20online','ports','Miner\x20RPC\x20request\x20missing\x20RPC\x20id','method','Miner\x20RPC\x20request\x20missing\x20RPC\x20method','params','Miner\x20RPC\x20request\x20missing\x20RPC\x20params','writable','2.0','remoteAddress','setKeepAlive','setEncoding','utf8','write','data','byteLength','Socket\x20flooding\x20detected\x20and\x20prevented\x20from\x20%s','destroy','pop','parse','end','HTTP/1.1','HTTP/1.0','\x20generated\x20an\x20exception.\x20Message:\x20','Exception:\x20','ECONNRESET','Socket\x20error\x20from\x20%s\x20%j','close','ssl','sslCert','sslKey','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20key\x20not\x20configured','sslCA','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20certificate\x20authority\x20not\x20configured','existsSync','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20certificate\x20file\x20not\x20found\x20(configuration\x20error)','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20key\x20file\x20not\x20found\x20(configuration\x20error)','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20certificate\x20authority\x20file\x20not\x20found\x20(configuration\x20error)','readFileSync','createServer','listen','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL),\x20error:\x20$j','Clear\x20values\x20for\x20SSL\x20port\x20%d\x20in\x20redis\x20database.','del','Started\x20server\x20listening\x20on\x20port\x20%d\x20(SSL)','Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d,\x20error:\x20$j','Clear\x20values\x20for\x20port\x20%d\x20in\x20redis\x20database.','Started\x20server\x20listening\x20on\x20port\x20%d','waterfall','blockRefreshInterval','tls','async','bignum','./apiInterfaces.js','daemon','wallet','api','./notifications.js','./utils.js','cryptonight-hashing','^[0-9A-Fa-f]{8}$','cleanupInterval','redis','poolServer','undefined','fallBackCoin','pool','(Thread\x20','env','forkId','log','cnVariant','cnBlobType','error','cnUtil','get_merged_mining_nonce_size','toString','repeat','isArray','childPools','length','random','shareTrust','min','banning','enabled','paymentId','addressSeparator','daemonType','default','filter','FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF','toByteArray','prototype','slice','noRetarget','varDiff','retargetTime','now','minerTimeout','lastBeat','warn','Miner\x20timed\x20out\x20and\x20disconnected\x20%s@%s','login','timeout','time','Ban\x20dropped\x20for\x20%s','message','type','banIP','from','block','blocktemplate_blob','hex','alloc','copy','prev_hash','info','New\x20%s\x20block\x20to\x20mine\x20at\x20height\x20%d\x20w/\x20difficulty\x20of\x20%d','coin','height','difficulty','ChildBlockTemplate','poolIndex','New\x20%s\x20child\x20block\x20to\x20mine\x20at\x20height\x20%d\x20w/\x20difficulty\x20of\x20%d','ChildBlockTemplate\x20','BlockTemplate\x20','buffer','childBlockTemplate','indexOf','reserveOffset','reserved_offset','INTERNAL\x20ERROR:\x20found\x20reserve\x20offset\x20in\x20unexpected\x20place\x20(found\x20at\x20%d,\x20expected\x20at\x20%d)','extraNonce','clientNonceLocation','writeUInt32BE','convert_blob','push','shift','activeChildPool','pushMessage','job','getJob','variancePercent','targetTime','maxJump',':solo','prop','rewardType','childRewardType','rewardTypeAsKey','childRewardTypeAsKey','lastChildBlockHeight','pass','port','proxy','includes','xmr-node-proxy','childLogin','lastIndexOf','workerName','substr','trim','heartbeat','validJobs','workerName2','shareTimeRing','ringBuffer','lastShareTime','trust','tMax','avg','minDiff','maxDiff','abs','clear','round','Retargetting\x20difficulty\x20%d\x20to\x20%d\x20for\x20%s','pendingDifficulty','lastDifficulty','toBuffer','reverse','readUInt32BE','cachedJob','nextBlob','lastBlockHeight','getTargetHex','nextBlobWithChildNonce','uid','diffHex','clientPoolLocation','validShares','invalidShares','checkThreshold','invalidPercent','Banned\x20%s@%s','send','banned','characterCount','Invalid\x20paymentId\x20specified\x20for\x20','login,\x20','validation','\x20banned\x20for\x20','Invalid\x20difficulty\x20specified\x20for\x20','Your\x20IP\x20is\x20banned','parent\x20','determineRewardData','address','child\x20','cleanupSpecialChars','No\x20address\x20specified\x20for\x20login','Invalid\x20address\x20used\x20for\x20login','match','Invalid\x20paymentId\x20specified\x20for\x20child\x20login','Invalid\x20paymentId\x20specified\x20for\x20child\x20login,\x20','\x20minutes','pattern','test','poolAddress','getAddressPrefix','N/A','Invalid\x20address\x20used\x20for\x20childLogin\x20(prefix:\x20%s):\x20%s','Invalid\x20address\x20used\x20for\x20childLogin','fixedDiff','Invalid\x20difficulty\x20value\x20\x22%s\x22\x20for\x20login:\x20%s','split','^([a-zA-Z0-9]){0,15}$','Invalid\x20paymentId\x20specified\x20for\x20login','Invalid\x20paymentId\x20specified\x20for\x20login,\x20','validateMinerAddress','Invalid\x20address\x20used\x20for\x20login\x20(prefix:\x20%s):\x20%s','agent','getjob','Unauthenticated','submit','job_id','Invalid\x20job\x20id','nonce','result','Attack\x20detected','Malformed\x20miner\x20share:\x20','stringify','Malformed\x20nonce:\x20','\x20from\x20','toLowerCase','submissions','Duplicate\x20share:\x20','checkBan','Duplicate\x20share2','isInteger','poolNonce','workerNonce','Duplicate\x20share3','childHeight','Block\x20expired','probability','threshold','Share\x20trust\x20broken\x20by\x20%s@%s','penalty','Rejected\x20share:\x20invalid\x20result','append','keepalived','Invalid\x20method:\x20%s\x20(%j)\x20from\x20%s','Miner\x20difficulty\x20fixed\x20to\x20%s','sadd',':workers_ip:','hincrby',':ports:','users',':active_connections','sendToMiner','workerConnected','substring','...','replace','::ffff:','mergedMining','map','hdel','multi'];(function(_0x50f519,_0x418ce1){var _0x32c8e5=function(_0x414f46){while(--_0x414f46){_0x50f519['push'](_0x50f519['shift']());}};_0x32c8e5(++_0x418ce1);}(_0x1d31,0x6e));var _0x4866=function(_0x2b5b27,_0x4b8470){_0x2b5b27=_0x2b5b27-0x0;var _0x2abaf6=_0x1d31[_0x2b5b27];return _0x2abaf6;};let fs=require('fs');let net=require('net');let tls=require(_0x4866('0x0'));let async=require(_0x4866('0x1'));let bignum=require(_0x4866('0x2'));let apiInterfaces=require(_0x4866('0x3'))(config[_0x4866('0x4')],config[_0x4866('0x5')],config[_0x4866('0x6')]);let notifications=require(_0x4866('0x7'));let utils=require(_0x4866('0x8'));let cnHashing=require(_0x4866('0x9'));let noncePattern=new RegExp(_0x4866('0xa'));let cleanupInterval=config['redis'][_0x4866('0xb')]&&config[_0x4866('0xc')]['cleanupInterval']>0x0?config[_0x4866('0xc')][_0x4866('0xb')]:0xf;let fallBackCoin=typeof config[_0x4866('0xd')]['fallBackCoin']!==_0x4866('0xe')&&config[_0x4866('0xd')][_0x4866('0xf')]?config[_0x4866('0xd')]['fallBackCoin']:0x0;let logSystem=_0x4866('0x10');require('./exceptionWriter.js')(logSystem);let threadId=_0x4866('0x11')+process[_0x4866('0x12')][_0x4866('0x13')]+')\x20';let log=function(_0x2385ef,_0x5cd210,_0x370559,_0x3ec900){global[_0x4866('0x14')](_0x2385ef,_0x5cd210,threadId+_0x370559,_0x3ec900);};let cnAlgorithm=config['cnAlgorithm']||'cryptonight';let cnVariant=config[_0x4866('0x15')]||0x0;let cnBlobType=config[_0x4866('0x16')]||0x0;let cryptoNight;if(!cnHashing||!cnHashing[cnAlgorithm]){log(_0x4866('0x17'),logSystem,'Invalid\x20cryptonight\x20algorithm:\x20%s',[cnAlgorithm]);}else{cryptoNight=cnHashing[cnAlgorithm];}let instanceId=utils['instanceId']();let poolStarted=![];let connectedMiners={};let POOL_NONCE_SIZE=0x10+0x1;let EXTRA_NONCE_TEMPLATE='02'+POOL_NONCE_SIZE['toString'](0x10)+'00'['repeat'](POOL_NONCE_SIZE);let POOL_NONCE_MM_SIZE=POOL_NONCE_SIZE+utils[_0x4866('0x18')][_0x4866('0x19')]();let EXTRA_NONCE_NO_CHILD_TEMPLATE='02'+POOL_NONCE_MM_SIZE[_0x4866('0x1a')](0x10)+'00'[_0x4866('0x1b')](POOL_NONCE_MM_SIZE);let mergedMining=config[_0x4866('0xd')]['mergedMining']&&(Array[_0x4866('0x1c')](config[_0x4866('0x1d')])&&config[_0x4866('0x1d')][_0x4866('0x1e')]>0x0);function randomIntFromInterval(_0x44886e,_0x46e9b9){return Math['floor'](Math[_0x4866('0x1f')]()*(_0x46e9b9-_0x44886e+0x1)+_0x44886e);}let shareTrustEnabled=config[_0x4866('0xd')][_0x4866('0x20')]&&config[_0x4866('0xd')][_0x4866('0x20')]['enabled'];let shareTrustStepFloat=shareTrustEnabled?config[_0x4866('0xd')][_0x4866('0x20')]['stepDown']/0x64:0x0;let shareTrustMinFloat=shareTrustEnabled?config['poolServer'][_0x4866('0x20')][_0x4866('0x21')]/0x64:0x0;let banningEnabled=config[_0x4866('0xd')]['banning']&&config[_0x4866('0xd')][_0x4866('0x22')][_0x4866('0x23')];let bannedIPs={};let perIPStats={};let slushMiningEnabled=config[_0x4866('0xd')]['slushMining']&&config['poolServer']['slushMining'][_0x4866('0x23')];if(!config[_0x4866('0xd')][_0x4866('0x24')])config[_0x4866('0xd')][_0x4866('0x24')]={};if(!config['poolServer'][_0x4866('0x24')][_0x4866('0x25')])config[_0x4866('0xd')][_0x4866('0x24')]['addressSeparator']='+';let previousOffset=0x7;config[_0x4866('0x26')]=config[_0x4866('0x26')]||_0x4866('0x27');if(config[_0x4866('0x26')]==='bytecoin')previousOffset=0x3;function Create2DArray(_0x4f2c54){let _0x199a09=[];for(let _0x2c243e=0x0;_0x2c243e<_0x4f2c54;_0x2c243e++){_0x199a09[_0x2c243e]=[];}return _0x199a09;}if(mergedMining)config[_0x4866('0x1d')]=config[_0x4866('0x1d')][_0x4866('0x28')](_0x123dc3=>_0x123dc3['enabled']);let validBlockTemplates=mergedMining?Create2DArray(config[_0x4866('0x1d')]['length']):Create2DArray(0x1);let currentBlockTemplate=[];let currentChildBlockTemplate=new Array(mergedMining?config[_0x4866('0x1d')]['length']:0x1);let diff1=bignum(_0x4866('0x29'),0x10);Buffer['prototype'][_0x4866('0x2a')]=function(){return Array[_0x4866('0x2b')][_0x4866('0x2c')]['call'](this,0x0);};setInterval(function(){let _0x1027b2=Date['now']()/0x3e8|0x0;for(let _0x54d8b8 in connectedMiners){let _0x3ed80a=connectedMiners[_0x54d8b8];if(!_0x3ed80a[_0x4866('0x2d')]){_0x3ed80a['retarget'](_0x1027b2);}}},config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x2f')]*0x3e8);setInterval(function(){let _0x39a124=Date[_0x4866('0x30')]();let _0x991fc=config['poolServer'][_0x4866('0x31')]*0x3e8;for(let _0x102f90 in connectedMiners){let _0x31acce=connectedMiners[_0x102f90];if(_0x39a124-_0x31acce[_0x4866('0x32')]>_0x991fc){log(_0x4866('0x33'),logSystem,_0x4866('0x34'),[_0x31acce[_0x4866('0x35')],_0x31acce['ip']]);delete connectedMiners[_0x102f90];removeConnectedWorker(_0x31acce,_0x4866('0x36'));}}if(banningEnabled){for(ip in bannedIPs){let _0x2a32db=bannedIPs[ip];if(_0x39a124-_0x2a32db>config[_0x4866('0xd')][_0x4866('0x22')][_0x4866('0x37')]*0x3e8){delete bannedIPs[ip];delete perIPStats[ip];log('info',logSystem,_0x4866('0x38'),[ip]);}}}},0x7530);process['on'](_0x4866('0x39'),function(_0x481039){switch(_0x481039[_0x4866('0x3a')]){case _0x4866('0x3b'):bannedIPs[_0x481039['ip']]=Date[_0x4866('0x30')]();break;case'BlockTemplate':let _0x1a1120=Buffer[_0x4866('0x3c')](_0x481039[_0x4866('0x3d')][_0x4866('0x3e')],_0x4866('0x3f'));let _0x10f380=Buffer[_0x4866('0x40')](0x20);_0x1a1120[_0x4866('0x41')](_0x10f380,0x0,previousOffset,0x27);try{if(!currentBlockTemplate[0x0]||_0x10f380[_0x4866('0x1a')](_0x4866('0x3f'))!==currentBlockTemplate[0x0][_0x4866('0x42')][_0x4866('0x1a')]('hex')){log(_0x4866('0x43'),logSystem,_0x4866('0x44'),[config[_0x4866('0x45')],_0x481039['block'][_0x4866('0x46')],_0x481039[_0x4866('0x3d')][_0x4866('0x47')]]);if(mergedMining){for(var _0x162842=0x0;_0x162842<config[_0x4866('0x1d')]['length'];_0x162842++){processBlockTemplate(_0x481039[_0x4866('0x3d')],_0x162842);}}else{processBlockTemplate(_0x481039[_0x4866('0x3d')],0x0);}return;}else{return;}}catch(_0x2094bd){log(_0x4866('0x17'),logSystem,'BlockTemplate\x20'+_0x2094bd);}break;case _0x4866('0x48'):let _0x271523=parseInt(_0x481039[_0x4866('0x49')]);try{if(!currentChildBlockTemplate[_0x271523]||_0x481039['block'][_0x4866('0x46')]>currentChildBlockTemplate[_0x271523][_0x4866('0x46')]){log('info',logSystem,_0x4866('0x4a'),[config[_0x4866('0x1d')][_0x271523][_0x4866('0x45')],_0x481039[_0x4866('0x3d')][_0x4866('0x46')],_0x481039[_0x4866('0x3d')][_0x4866('0x47')]]);processChildBlockTemplate(_0x271523,_0x481039[_0x4866('0x3d')]);return;}else{return;}}catch(_0x168259){log(_0x4866('0x17'),logSystem,_0x4866('0x4b')+_0x168259);}break;}});function BlockTemplate(_0x144f15,_0x170d96,_0x50bc16){this[_0x4866('0x47')]=_0x144f15[_0x4866('0x47')];this[_0x4866('0x46')];try{this[_0x4866('0x46')]=_0x144f15[_0x4866('0x46')];}catch(_0x4176f5){console[_0x4866('0x14')](_0x4866('0x4c')+_0x4176f5);}this['blocktemplate_blob']=_0x144f15[_0x4866('0x3e')];let _0x5d70d9=this[_0x4866('0x3e')];this[_0x4866('0x4d')]=Buffer[_0x4866('0x3c')](_0x5d70d9,_0x4866('0x3f'));let _0x2651f2=EXTRA_NONCE_TEMPLATE;if(_0x170d96&&mergedMining){if(currentChildBlockTemplate[_0x50bc16]){this['childBlockTemplate']=currentChildBlockTemplate[_0x50bc16];this[_0x4866('0x4d')]=utils[_0x4866('0x18')]['construct_mm_parent_block_blob'](this[_0x4866('0x4d')],cnBlobType,this[_0x4866('0x4e')][_0x4866('0x4d')]);_0x5d70d9=this[_0x4866('0x4d')][_0x4866('0x1a')]('hex');}else{_0x2651f2=EXTRA_NONCE_NO_CHILD_TEMPLATE;}}var _0x23cb1a=_0x5d70d9[_0x4866('0x4f')](_0x2651f2);if(_0x23cb1a!==-0x1){this[_0x4866('0x50')]=0x2+(_0x23cb1a>>0x1);if(this[_0x4866('0x50')]!=_0x144f15[_0x4866('0x51')]&&!mergedMining){log('error',logSystem,_0x4866('0x52'),[this[_0x4866('0x50')],_0x144f15[_0x4866('0x51')]]);}}else{log(_0x4866('0x17'),logSystem,'INTERNAL\x20ERROR:\x20Couldn\x27t\x20find\x20extra\x20nonce\x20data\x20in\x20blob!');this[_0x4866('0x50')]=_0x144f15[_0x4866('0x50')]||_0x144f15[_0x4866('0x51')];}instanceId['copy'](this[_0x4866('0x4d')],this['reserveOffset']+0x4,0x0,0x4);this[_0x4866('0x53')]=0x0;this[_0x4866('0x54')]=this['reserveOffset']+0xc;this[_0x4866('0x42')]=Buffer[_0x4866('0x40')](0x20);this[_0x4866('0x4d')][_0x4866('0x41')](this[_0x4866('0x42')],0x0,previousOffset,0x27);}BlockTemplate[_0x4866('0x2b')]={'nextBlob':function(_0xbc6f35){this[_0x4866('0x4d')][_0x4866('0x55')](++this[_0x4866('0x53')],this[_0x4866('0x50')]);if(mergedMining&&this[_0x4866('0x4e')]){return utils[_0x4866('0x18')][_0x4866('0x56')](this[_0x4866('0x4d')],cnBlobType,this[_0x4866('0x4e')][_0x4866('0x4d')])['toString'](_0x4866('0x3f'));}return utils[_0x4866('0x18')][_0x4866('0x56')](this[_0x4866('0x4d')],cnBlobType)[_0x4866('0x1a')](_0x4866('0x3f'));},'nextBlobWithChildNonce':function(){this['buffer'][_0x4866('0x55')](++this['extraNonce'],this[_0x4866('0x50')]);return this[_0x4866('0x4d')][_0x4866('0x1a')]('hex');}};function processBlockTemplate(_0x44fd5b,_0x463595){let _0x4abedf=new BlockTemplate(_0x44fd5b,!![],_0x463595);if(currentBlockTemplate[_0x463595])validBlockTemplates[_0x463595][_0x4866('0x57')](currentBlockTemplate[_0x463595]);while(validBlockTemplates[_0x463595][_0x4866('0x1e')]>(mergedMining?0x6:0x3))validBlockTemplates[_0x463595][_0x4866('0x58')]();currentBlockTemplate[_0x463595]=_0x4abedf;notifyConnectedMiners(_0x463595);}function processChildBlockTemplate(_0x5500f2,_0xf662e){let _0x3419ec=new BlockTemplate(_0xf662e,![]);currentChildBlockTemplate[_0x5500f2]=_0x3419ec;if(currentBlockTemplate[_0x5500f2]){processBlockTemplate(currentBlockTemplate[_0x5500f2],_0x5500f2);}}function notifyConnectedMiners(_0x4b2521){let _0x519fa3=Date['now']()/0x3e8|0x0;for(let _0x57c6ea in connectedMiners){let _0x39fae6=connectedMiners[_0x57c6ea];if(_0x4b2521===_0x39fae6[_0x4866('0x59')])_0x39fae6[_0x4866('0x5a')](_0x4866('0x5b'),_0x39fae6[_0x4866('0x5c')]());}}let VarDiff=function(){let _0x20f88d=config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x5d')]/0x64*config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x5e')];return{'variance':_0x20f88d,'bufferSize':config['poolServer'][_0x4866('0x2e')][_0x4866('0x2f')]/config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x5e')]*0x4,'tMin':config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x5e')]-_0x20f88d,'tMax':config[_0x4866('0xd')][_0x4866('0x2e')]['targetTime']+_0x20f88d,'maxJump':config['poolServer'][_0x4866('0x2e')][_0x4866('0x5f')]};}();function GetRewardTypeAsKey(_0x5080a2){switch(_0x5080a2){case'solo':return _0x4866('0x60');case _0x4866('0x61'):return'';default:return'';}}function Miner(_0x5c9b85,_0x826f7e,_0x12f1a7,_0x3bd958,_0x54463e,_0x1c223d,_0x133792,_0x5f3859,_0xc1bfc3,_0x22d1cd,_0x845f9f,_0x478771,_0x75962d){this[_0x4866('0x62')]=_0x5c9b85;this[_0x4866('0x63')]=_0x826f7e;this[_0x4866('0x64')]=GetRewardTypeAsKey(_0x5c9b85);this[_0x4866('0x65')]=GetRewardTypeAsKey(_0x826f7e);this[_0x4866('0x66')]=0x0;this['id']=_0x12f1a7;this[_0x4866('0x59')]=_0x3bd958||0x0;this['login']=_0x54463e;this[_0x4866('0x67')]=_0x1c223d;this['ip']=_0x133792;this[_0x4866('0x68')]=_0x5f3859;this[_0x4866('0x69')]=![];if(_0xc1bfc3&&_0xc1bfc3[_0x4866('0x6a')](_0x4866('0x6b'))){this['proxy']=!![];}this['workerName']='undefined';this[_0x4866('0x6c')]=_0x22d1cd;if(_0x1c223d[_0x4866('0x6d')]('@')>=0x0&&_0x1c223d[_0x4866('0x6d')]('@')<_0x1c223d[_0x4866('0x1e')]){passDelimiterPos=_0x1c223d[_0x4866('0x6d')]('@')+0x1;this[_0x4866('0x6e')]=_0x1c223d[_0x4866('0x6f')](passDelimiterPos,_0x1c223d[_0x4866('0x1e')])[_0x4866('0x70')]();}this['pushMessage']=_0x75962d;this[_0x4866('0x71')]();this[_0x4866('0x2d')]=_0x478771;this[_0x4866('0x47')]=_0x845f9f;this[_0x4866('0x72')]=[];this[_0x4866('0x73')]=_0x1c223d;this[_0x4866('0x74')]=utils[_0x4866('0x75')](0x10);this[_0x4866('0x76')]=Date[_0x4866('0x30')]()/0x3e8|0x0;if(shareTrustEnabled){this[_0x4866('0x77')]={'threshold':config[_0x4866('0xd')][_0x4866('0x20')]['threshold'],'probability':0x1,'penalty':0x0};}}Miner[_0x4866('0x2b')]={'retarget':function(_0x108e99){let _0xb143c=config[_0x4866('0xd')][_0x4866('0x2e')];let _0x2a927a=_0x108e99-this['lastShareTime'];let _0x4351dc=_0x2a927a>VarDiff[_0x4866('0x78')];let _0x1f245d=this[_0x4866('0x74')][_0x4866('0x79')](_0x4351dc?_0x2a927a:null);let _0x189be4;let _0x9f78f4;if(_0x1f245d>VarDiff[_0x4866('0x78')]&&this[_0x4866('0x47')]>_0xb143c[_0x4866('0x7a')]){_0x189be4=_0xb143c[_0x4866('0x5e')]/_0x1f245d*this[_0x4866('0x47')];_0x189be4=_0x189be4>_0xb143c[_0x4866('0x7a')]?_0x189be4:_0xb143c[_0x4866('0x7a')];_0x9f78f4=-0x1;}else if(_0x1f245d<VarDiff['tMin']&&this[_0x4866('0x47')]<_0xb143c[_0x4866('0x7b')]){_0x189be4=_0xb143c[_0x4866('0x5e')]/_0x1f245d*this[_0x4866('0x47')];_0x189be4=_0x189be4<_0xb143c[_0x4866('0x7b')]?_0x189be4:_0xb143c[_0x4866('0x7b')];_0x9f78f4=0x1;}else{return;}if(Math[_0x4866('0x7c')](_0x189be4-this['difficulty'])/this[_0x4866('0x47')]*0x64>_0xb143c[_0x4866('0x5f')]){let _0xa85e7d=_0xb143c[_0x4866('0x5f')]/0x64*this[_0x4866('0x47')]*_0x9f78f4;_0x189be4=this[_0x4866('0x47')]+_0xa85e7d;}this['setNewDiff'](_0x189be4);this['shareTimeRing'][_0x4866('0x7d')]();if(_0x4351dc)this[_0x4866('0x76')]=_0x108e99;},'setNewDiff':function(_0x52c86c){_0x52c86c=Math[_0x4866('0x7e')](_0x52c86c);if(this[_0x4866('0x47')]===_0x52c86c)return;log(_0x4866('0x43'),logSystem,_0x4866('0x7f'),[this[_0x4866('0x47')],_0x52c86c,this[_0x4866('0x35')]]);this[_0x4866('0x80')]=_0x52c86c;this[_0x4866('0x5a')]('job',this[_0x4866('0x5c')]());},'heartbeat':function(){this[_0x4866('0x32')]=Date[_0x4866('0x30')]();},'getTargetHex':function(){if(this[_0x4866('0x80')]){this[_0x4866('0x81')]=this[_0x4866('0x47')];this[_0x4866('0x47')]=this[_0x4866('0x80')];this[_0x4866('0x80')]=null;}let _0x4eecc7=Buffer[_0x4866('0x40')](0x20);_0x4eecc7['fill'](0x0);let _0x5249fe=diff1['div'](this[_0x4866('0x47')])[_0x4866('0x82')]();_0x5249fe[_0x4866('0x41')](_0x4eecc7,0x20-_0x5249fe[_0x4866('0x1e')]);let _0x518d90=_0x4eecc7['slice'](0x0,0x4);let _0xa9b0b2=_0x518d90['toByteArray']()[_0x4866('0x83')]();let _0x26d70b=Buffer[_0x4866('0x3c')](_0xa9b0b2);this['target']=_0x26d70b[_0x4866('0x84')](0x0);let _0x420502=_0x26d70b[_0x4866('0x1a')](_0x4866('0x3f'));return _0x420502;},'getJob':function(){if(mergedMining){if(this['lastBlockHeight']===currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')]&&(!currentChildBlockTemplate[this[_0x4866('0x59')]]||this[_0x4866('0x66')]===currentChildBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')])&&!this[_0x4866('0x80')]&&this[_0x4866('0x85')]!==null){return this['cachedJob'];}this[_0x4866('0x66')]=currentChildBlockTemplate?currentChildBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')]:-0x1;if(!this[_0x4866('0x69')]){let _0x55a202=currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x86')](this[_0x4866('0x59')]);this[_0x4866('0x87')]=currentBlockTemplate[this['activeChildPool']]['height'];let _0x6aaa5f=this[_0x4866('0x88')]();let _0x1d562a={'id':utils['uid'](),'extraNonce':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x53')],'height':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')],'childHeight':this[_0x4866('0x66')],'difficulty':this[_0x4866('0x47')],'diffHex':this['diffHex'],'activeChildPool':this[_0x4866('0x59')],'submissions':[]};this[_0x4866('0x72')][_0x4866('0x57')](_0x1d562a);while(this['validJobs'][_0x4866('0x1e')]>0x4)this[_0x4866('0x72')][_0x4866('0x58')]();this[_0x4866('0x85')]={'blob':_0x55a202,'job_id':_0x1d562a['id'],'target':_0x6aaa5f,'id':this['id']};}else{let _0x484539=currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x89')]();this['lastBlockHeight']=currentBlockTemplate[this['activeChildPool']]['height'];let _0x6aaa5f=this[_0x4866('0x88')]();let _0x1d562a={'id':utils[_0x4866('0x8a')](),'extraNonce':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x53')],'height':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')],'childHeight':this[_0x4866('0x66')],'difficulty':this['difficulty'],'diffHex':this[_0x4866('0x8b')],'clientPoolLocation':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x8c')],'clientNonceLocation':currentBlockTemplate[this[_0x4866('0x59')]]['clientNonceLocation'],'activeChildPool':this['activeChildPool'],'submissions':[]};this[_0x4866('0x72')][_0x4866('0x57')](_0x1d562a);while(this[_0x4866('0x72')][_0x4866('0x1e')]>0x4)this[_0x4866('0x72')][_0x4866('0x58')]();this[_0x4866('0x85')]={'blocktemplate_blob':_0x484539,'difficulty':currentBlockTemplate[this['activeChildPool']][_0x4866('0x47')],'height':currentBlockTemplate[this[_0x4866('0x59')]]['height'],'childHeight':this[_0x4866('0x66')],'reserved_offset':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x50')],'client_nonce_offset':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x54')],'client_pool_offset':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x8c')],'target_diff':this[_0x4866('0x47')],'target_diff_hex':this[_0x4866('0x8b')],'job_id':_0x1d562a['id'],'id':this['id']};}}else{if(this[_0x4866('0x87')]===currentBlockTemplate[this['activeChildPool']][_0x4866('0x46')]&&!this['pendingDifficulty']&&this[_0x4866('0x85')]!==null){return this['cachedJob'];}if(!this[_0x4866('0x69')]){let _0x489a35=currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x86')]();this[_0x4866('0x87')]=currentBlockTemplate[this['activeChildPool']][_0x4866('0x46')];let _0x6aaa5f=this[_0x4866('0x88')]();let _0x1d562a={'id':utils[_0x4866('0x8a')](),'extraNonce':currentBlockTemplate[this[_0x4866('0x59')]]['extraNonce'],'height':currentBlockTemplate[this['activeChildPool']]['height'],'difficulty':this[_0x4866('0x47')],'diffHex':this['diffHex'],'submissions':[]};this['validJobs'][_0x4866('0x57')](_0x1d562a);if(this[_0x4866('0x72')][_0x4866('0x1e')]>0x4)this[_0x4866('0x72')][_0x4866('0x58')]();this['cachedJob']={'blob':_0x489a35,'job_id':_0x1d562a['id'],'target':_0x6aaa5f,'id':this['id']};}else{let _0x2f2004=currentBlockTemplate[this['activeChildPool']][_0x4866('0x89')]();this[_0x4866('0x87')]=currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')];let _0x6aaa5f=this[_0x4866('0x88')]();let _0x1d562a={'id':utils[_0x4866('0x8a')](),'extraNonce':currentBlockTemplate[this['activeChildPool']][_0x4866('0x53')],'height':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')],'difficulty':this[_0x4866('0x47')],'diffHex':this[_0x4866('0x8b')],'clientPoolLocation':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x8c')],'clientNonceLocation':currentBlockTemplate[this['activeChildPool']][_0x4866('0x54')],'submissions':[]};this[_0x4866('0x72')][_0x4866('0x57')](_0x1d562a);if(this['validJobs'][_0x4866('0x1e')]>0x4)this[_0x4866('0x72')][_0x4866('0x58')]();this[_0x4866('0x85')]={'blocktemplate_blob':_0x2f2004,'difficulty':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x47')],'height':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x46')],'reserved_offset':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x50')],'client_nonce_offset':currentBlockTemplate[this[_0x4866('0x59')]]['clientNonceLocation'],'client_pool_offset':currentBlockTemplate[this[_0x4866('0x59')]][_0x4866('0x8c')],'target_diff':this['difficulty'],'target_diff_hex':this[_0x4866('0x8b')],'job_id':_0x1d562a['id'],'id':this['id']};}}return this[_0x4866('0x85')];},'checkBan':function(_0x582a29){if(!banningEnabled)return;if(!perIPStats[this['ip']]){perIPStats[this['ip']]={'validShares':0x0,'invalidShares':0x0};}let _0x3d707f=perIPStats[this['ip']];_0x582a29?_0x3d707f[_0x4866('0x8d')]++:_0x3d707f[_0x4866('0x8e')]++;if(_0x3d707f[_0x4866('0x8d')]+_0x3d707f[_0x4866('0x8e')]>=config['poolServer'][_0x4866('0x22')][_0x4866('0x8f')]){if(_0x3d707f['invalidShares']/_0x3d707f[_0x4866('0x8d')]>=config[_0x4866('0xd')][_0x4866('0x22')][_0x4866('0x90')]/0x64){_0x582a29?this[_0x4866('0x8d')]++:this['invalidShares']++;log(_0x4866('0x33'),logSystem,_0x4866('0x91'),[this[_0x4866('0x35')],this['ip']]);bannedIPs[this['ip']]=Date[_0x4866('0x30')]();delete connectedMiners[this['id']];process[_0x4866('0x92')]({'type':_0x4866('0x3b'),'ip':this['ip']});removeConnectedWorker(this,_0x4866('0x93'));}else{_0x3d707f['invalidShares']=0x0;_0x3d707f[_0x4866('0x8d')]=0x0;}}}};validateMinerPaymentId_difficulty=(_0x3cbe3e,_0x2c066c,_0x39ff40,_0xe24c7d,_0x49264e)=>{if(utils[_0x4866('0x94')](_0x3cbe3e,'\x5c+')>0x1){let _0x5a0f3f=_0x4866('0x95')+_0xe24c7d+_0x4866('0x96')+_0x2c066c;if(_0x39ff40['paymentId'][_0x4866('0x97')]){process[_0x4866('0x92')]({'type':_0x4866('0x3b'),'ip':_0x2c066c});_0x5a0f3f+=_0x4866('0x98')+_0x39ff40[_0x4866('0x22')][_0x4866('0x37')]/0x3c+'\x20minutes';}_0x49264e(_0x5a0f3f);log(_0x4866('0x33'),logSystem,_0x5a0f3f);return![];}if(utils[_0x4866('0x94')](_0x3cbe3e,'\x5c.')>0x1){log('warn',logSystem,_0x4866('0x99')+_0xe24c7d+'login');_0x49264e('Invalid\x20difficulty\x20specified\x20for\x20'+_0xe24c7d+_0x4866('0x96')+_0x2c066c);return![];}return!![];};function handleMinerMethod(_0x184219,_0x502854,_0xcf0fcd,_0x4888c6,_0x572274,_0x2e74a2){let _0x312a6d=connectedMiners[_0x502854['id']];if(IsBannedIp(_0xcf0fcd)){_0x572274(_0x4866('0x9a'));return;}switch(_0x184219){case _0x4866('0x35'):let _0x1c2d78=_0x502854['login'];if(!_0x1c2d78){_0x572274('Missing\x20login');return;}if(!validateMinerPaymentId_difficulty(_0x1c2d78,_0xcf0fcd,config[_0x4866('0xd')],_0x4866('0x9b'),_0x572274))return;let _0x2fc8ce=utils[_0x4866('0x9c')](_0x1c2d78);_0x1c2d78=_0x2fc8ce[_0x4866('0x9d')];let _0x195beb=_0x2fc8ce['rewardType'];let _0x3c230b='';let _0x280bf0=null;let _0x5b6b89=_0x4888c6[_0x4866('0x68')];let _0x485a7a=_0x502854['pass'];let _0x5af87b=_0x485a7a[_0x4866('0x70')]();let _0x911b25=0x0;let _0x4aa917=_0x195beb;if(mergedMining){_0x911b25=-0x1;if(!validateMinerPaymentId_difficulty(_0x485a7a,_0xcf0fcd,config[_0x4866('0xd')],_0x4866('0x9e'),_0x572274))return;_0x2fc8ce=utils[_0x4866('0x9c')](_0x485a7a);_0x485a7a=_0x2fc8ce[_0x4866('0x9d')];_0x4aa917=_0x2fc8ce['rewardType'];if(_0x485a7a[_0x4866('0x4f')]('@')>=0x0&&_0x485a7a[_0x4866('0x4f')]('@')>=0x0){passDelimiterPos=_0x485a7a['lastIndexOf']('@');_0x5af87b=_0x485a7a[_0x4866('0x6f')](0x0,passDelimiterPos)['trim']();}_0x5af87b=_0x5af87b['replace'](/\s/g,'');_0x5af87b=utils[_0x4866('0x9f')](_0x5af87b);let _0x21d735=_0x5af87b['split'](config[_0x4866('0xd')][_0x4866('0x24')][_0x4866('0x25')]);_0x3c230b=_0x21d735[0x0]||null;paymentId=_0x21d735[0x1]||null;if(!_0x3c230b){log(_0x4866('0x33'),logSystem,_0x4866('0xa0'));_0x572274(_0x4866('0xa1'));}if(paymentId&&paymentId[_0x4866('0xa2')]('^([a-zA-Z0-9]){0,15}$')){if(config[_0x4866('0xd')][_0x4866('0x24')][_0x4866('0x97')]){process[_0x4866('0x92')]({'type':_0x4866('0x3b'),'ip':_0xcf0fcd});log(_0x4866('0x33'),logSystem,_0x4866('0xa3'));}else{log(_0x4866('0x33'),logSystem,_0x4866('0xa3'));}_0x572274(_0x4866('0xa4')+_0x4888c6['ip']+_0x4866('0x98')+config[_0x4866('0xd')][_0x4866('0x22')][_0x4866('0x37')]/0x3c+_0x4866('0xa5'));return;}for(i=0x0;i<config['childPools']['length'];i++){if(config[_0x4866('0x1d')][i][_0x4866('0xa6')]){if(new RegExp(config['childPools'][i][_0x4866('0xa6')],'i')[_0x4866('0xa7')](_0x3c230b)){_0x911b25=i;break;}}}if(_0x911b25<0x0){_0x911b25=fallBackCoin;_0x3c230b=config[_0x4866('0x1d')][_0x911b25]['poolAddress'];_0x5af87b=config[_0x4866('0x1d')][_0x911b25][_0x4866('0xa8')];}if(!utils['validateChildMinerAddress'](_0x3c230b,_0x911b25)){let _0x24274c=utils[_0x4866('0xa9')](_0x3c230b);if(!_0x24274c)_0x24274c=_0x4866('0xaa');log(_0x4866('0x33'),logSystem,_0x4866('0xab'),[_0x24274c,_0x3c230b]);_0x572274(_0x4866('0xac'));return;}}let _0x201a3e=_0x4888c6[_0x4866('0x47')];let _0x44f3bd=![];if(config[_0x4866('0xd')][_0x4866('0xad')][_0x4866('0x23')]){let _0x9a96e8=_0x1c2d78[_0x4866('0x6d')](config[_0x4866('0xd')][_0x4866('0xad')][_0x4866('0x25')]);if(_0x9a96e8!==-0x1&&_0x1c2d78[_0x4866('0x1e')]-_0x9a96e8<0x20){diffValue=_0x1c2d78[_0x4866('0x6f')](_0x9a96e8+0x1);_0x201a3e=parseInt(diffValue);_0x1c2d78=_0x1c2d78[_0x4866('0x6f')](0x0,_0x9a96e8);if(!_0x201a3e||_0x201a3e!=diffValue){log('warn',logSystem,_0x4866('0xae'),[diffValue,_0x1c2d78]);_0x201a3e=_0x4888c6['difficulty'];}else{_0x44f3bd=!![];if(_0x201a3e<config[_0x4866('0xd')][_0x4866('0x2e')][_0x4866('0x7a')]){_0x201a3e=config[_0x4866('0xd')][_0x4866('0x2e')]['minDiff'];}}}}addr=_0x1c2d78[_0x4866('0xaf')](config[_0x4866('0xd')][_0x4866('0x24')][_0x4866('0x25')]);_0x3c230b=addr[0x0]||null;paymentId=addr[0x1]||null;if(!_0x3c230b){log(_0x4866('0x33'),logSystem,_0x4866('0xa0'));_0x572274(_0x4866('0xa1'));return;}if(paymentId&&paymentId[_0x4866('0xa2')](_0x4866('0xb0'))){if(config[_0x4866('0xd')][_0x4866('0x24')]['validation']){process['send']({'type':'banIP','ip':_0xcf0fcd});log(_0x4866('0x33'),logSystem,'Invalid\x20paymentId\x20specified\x20for\x20login');}else{log(_0x4866('0x33'),logSystem,_0x4866('0xb1'));}_0x572274(_0x4866('0xb2')+_0x4888c6['ip']+'\x20banned\x20for\x20'+config['poolServer'][_0x4866('0x22')][_0x4866('0x37')]/0x3c+'\x20minutes');return;}if(!utils[_0x4866('0xb3')](_0x3c230b)){let _0x1d14fe=utils[_0x4866('0xa9')](_0x3c230b);if(!_0x1d14fe)_0x1d14fe='N/A';log(_0x4866('0x33'),logSystem,_0x4866('0xb4'),[_0x1d14fe,_0x3c230b]);_0x572274('Invalid\x20address\x20used\x20for\x20login');return;}let _0xb7434=utils[_0x4866('0x8a')]();_0x312a6d=new Miner(_0x195beb,_0x4aa917,_0xb7434,_0x911b25,_0x1c2d78,_0x485a7a,_0xcf0fcd,_0x5b6b89,_0x502854[_0x4866('0xb5')],_0x5af87b,_0x201a3e,_0x44f3bd,_0x2e74a2);connectedMiners[_0xb7434]=_0x312a6d;_0x572274(null,{'id':_0xb7434,'job':_0x312a6d[_0x4866('0x5c')](),'status':'OK'});newConnectedWorker(_0x312a6d);break;case _0x4866('0xb6'):if(!_0x312a6d){_0x572274(_0x4866('0xb7'));return;}_0x312a6d[_0x4866('0x71')]();_0x572274(null,_0x312a6d[_0x4866('0x5c')]());break;case _0x4866('0xb8'):if(!_0x312a6d){_0x572274('Unauthenticated');return;}_0x312a6d[_0x4866('0x71')]();let _0x231eaf=_0x312a6d[_0x4866('0x72')]['filter'](function(_0x231eaf){return _0x231eaf['id']===_0x502854[_0x4866('0xb9')];})[0x0];if(!_0x231eaf){_0x572274(_0x4866('0xba'));return;}if(!_0x502854[_0x4866('0xbb')]||!_0x502854[_0x4866('0xbc')]){_0x572274(_0x4866('0xbd'));let _0xd56d71=_0x312a6d?'\x20'+_0x312a6d[_0x4866('0x35')]+'@'+_0x312a6d['ip']:'';log(_0x4866('0x33'),logSystem,_0x4866('0xbe')+JSON[_0x4866('0xbf')](_0x502854)+'\x20from\x20'+_0xd56d71);return;}if(!noncePattern['test'](_0x502854[_0x4866('0xbb')])){let _0x159b1d=_0x312a6d?'\x20'+_0x312a6d[_0x4866('0x35')]+'@'+_0x312a6d['ip']:'';log(_0x4866('0x33'),logSystem,_0x4866('0xc0')+JSON[_0x4866('0xbf')](_0x502854)+_0x4866('0xc1')+_0x159b1d);perIPStats[_0x312a6d['ip']]={'validShares':0x0,'invalidShares':0xf423f};_0x312a6d['checkBan'](![]);_0x572274('Duplicate\x20share1');return;}_0x502854[_0x4866('0xbb')]=_0x502854[_0x4866('0xbb')][_0x4866('0xc2')]();if(!_0x312a6d[_0x4866('0x69')]){if(_0x231eaf[_0x4866('0xc3')][_0x4866('0x4f')](_0x502854[_0x4866('0xbb')])!==-0x1){let _0x2e11d6=_0x312a6d?'\x20'+_0x312a6d[_0x4866('0x35')]+'@'+_0x312a6d['ip']:'';log(_0x4866('0x33'),logSystem,_0x4866('0xc4')+JSON[_0x4866('0xbf')](_0x502854)+_0x4866('0xc1')+_0x2e11d6);perIPStats[_0x312a6d['ip']]={'validShares':0x0,'invalidShares':0xf423f};_0x312a6d[_0x4866('0xc5')](![]);_0x572274(_0x4866('0xc6'));return;}_0x231eaf[_0x4866('0xc3')][_0x4866('0x57')](_0x502854[_0x4866('0xbb')]);}else{if(!Number[_0x4866('0xc7')](_0x502854[_0x4866('0xc8')])||!Number['isInteger'](_0x502854[_0x4866('0xc9')])){let _0x939c65=_0x312a6d?'\x20'+_0x312a6d[_0x4866('0x35')]+'@'+_0x312a6d['ip']:'';log('warn',logSystem,_0x4866('0xc0')+JSON[_0x4866('0xbf')](_0x502854)+_0x4866('0xc1')+_0x939c65);perIPStats[_0x312a6d['ip']]={'validShares':0x0,'invalidShares':0xf423f};_0x312a6d[_0x4866('0xc5')](![]);_0x572274(_0x4866('0xca'));return;}let _0x3cf39a=_0x502854[_0x4866('0xbb')]+'_'+_0x502854[_0x4866('0xc8')]+'_'+_0x502854[_0x4866('0xc9')];if(_0x231eaf[_0x4866('0xc3')][_0x4866('0x4f')](_0x3cf39a)!==-0x1){let _0x939c65=_0x312a6d?'\x20'+_0x312a6d[_0x4866('0x35')]+'@'+_0x312a6d['ip']:'';log(_0x4866('0x33'),logSystem,_0x4866('0xc4')+JSON[_0x4866('0xbf')](_0x502854)+_0x4866('0xc1')+_0x939c65);perIPStats[_0x312a6d['ip']]={'validShares':0x0,'invalidShares':0xf423f};_0x312a6d[_0x4866('0xc5')](![]);_0x572274('Duplicate\x20share4');return;}_0x231eaf[_0x4866('0xc3')][_0x4866('0x57')](_0x3cf39a);}let _0x483a2e=function(_0x1978c7){return _0x1978c7[_0x4866('0x46')]===_0x231eaf['height']&&_0x231eaf[_0x4866('0xcb')]===(_0x1978c7[_0x4866('0x4e')]?_0x1978c7[_0x4866('0x4e')][_0x4866('0x46')]:undefined);};let _0x259352=currentBlockTemplate[_0x312a6d[_0x4866('0x59')]];if(_0x231eaf[_0x4866('0xcb')])_0x259352=_0x483a2e(currentBlockTemplate[_0x312a6d[_0x4866('0x59')]])?currentBlockTemplate[_0x312a6d[_0x4866('0x59')]]:validBlockTemplates[_0x312a6d[_0x4866('0x59')]][_0x4866('0x28')](_0x483a2e)[0x0];if(!_0x259352){_0x572274(_0x4866('0xcc'));return;}let _0x5aa522=processShare(_0x312a6d,_0x231eaf,_0x259352,_0x502854);_0x312a6d[_0x4866('0xc5')](_0x5aa522);if(shareTrustEnabled){if(_0x5aa522){_0x312a6d[_0x4866('0x77')][_0x4866('0xcd')]-=shareTrustStepFloat;if(_0x312a6d[_0x4866('0x77')][_0x4866('0xcd')]<shareTrustMinFloat)_0x312a6d[_0x4866('0x77')][_0x4866('0xcd')]=shareTrustMinFloat;_0x312a6d[_0x4866('0x77')]['penalty']--;_0x312a6d[_0x4866('0x77')][_0x4866('0xce')]--;}else{log(_0x4866('0x33'),logSystem,_0x4866('0xcf'),[_0x312a6d[_0x4866('0x35')],_0x312a6d['ip']]);_0x312a6d[_0x4866('0x77')][_0x4866('0xcd')]=0x1;_0x312a6d['trust'][_0x4866('0xd0')]=config['poolServer']['shareTrust'][_0x4866('0xd0')];}}if(!_0x5aa522){_0x572274(_0x4866('0xd1'));return;}let _0x4d5084=Date['now']()/0x3e8|0x0;_0x312a6d[_0x4866('0x74')][_0x4866('0xd2')](_0x4d5084-_0x312a6d[_0x4866('0x76')]);_0x312a6d[_0x4866('0x76')]=_0x4d5084;_0x572274(null,{'status':'OK'});break;case _0x4866('0xd3'):if(!_0x312a6d){_0x572274(_0x4866('0xb7'));return;}_0x312a6d['heartbeat']();_0x572274(null,{'status':'KEEPALIVED'});break;default:_0x572274('Invalid\x20method');let _0x2f6eb4=_0x312a6d?'\x20'+_0x312a6d['login']+'@'+_0x312a6d['ip']:'';log(_0x4866('0x33'),logSystem,_0x4866('0xd4'),[_0x184219,_0x502854,_0x2f6eb4]);break;}}function newConnectedWorker(_0x493554){log(_0x4866('0x43'),logSystem,'Miner\x20connected\x20%s@%s\x20on\x20port',[_0x493554[_0x4866('0x35')],_0x493554['ip'],_0x493554[_0x4866('0x68')]]);if(_0x493554[_0x4866('0x6e')]!==_0x4866('0xe'))log(_0x4866('0x43'),logSystem,'Worker\x20Name:\x20%s',[_0x493554[_0x4866('0x6e')]]);if(_0x493554[_0x4866('0x47')])log(_0x4866('0x43'),logSystem,_0x4866('0xd5'),[_0x493554[_0x4866('0x47')]]);redisClient[_0x4866('0xd6')](config[_0x4866('0x45')]+_0x4866('0xd7')+_0x493554[_0x4866('0x35')],_0x493554['ip']);redisClient[_0x4866('0xd8')](config[_0x4866('0x45')]+_0x4866('0xd9')+_0x493554[_0x4866('0x68')],_0x4866('0xda'),0x1);redisClient[_0x4866('0xd8')](config[_0x4866('0x45')]+_0x4866('0xdb')+_0x493554['rewardTypeAsKey'],_0x493554[_0x4866('0x35')]+'~'+_0x493554[_0x4866('0x6e')],0x1,function(_0x2eaffa,_0x36cc1e){if(_0x36cc1e===0x1){notifications[_0x4866('0xdc')](_0x493554[_0x4866('0x35')],_0x4866('0xdd'),{'LOGIN':_0x493554[_0x4866('0x35')],'MINER':_0x493554[_0x4866('0x35')][_0x4866('0xde')](0x0,0x7)+_0x4866('0xdf')+_0x493554[_0x4866('0x35')][_0x4866('0xde')](_0x493554[_0x4866('0x35')][_0x4866('0x1e')]-0x7),'IP':_0x493554['ip'][_0x4866('0xe0')](_0x4866('0xe1'),''),'PORT':_0x493554[_0x4866('0x68')],'WORKER_NAME':_0x493554[_0x4866('0x6e')]!==_0x4866('0xe')?_0x493554[_0x4866('0x6e')]:''});}});if(config['poolServer'][_0x4866('0xe2')]){redisClient[_0x4866('0xd6')](config[_0x4866('0x1d')][_0x493554[_0x4866('0x59')]][_0x4866('0x45')]+_0x4866('0xd7')+_0x493554[_0x4866('0x6c')],_0x493554['ip']);redisClient[_0x4866('0xd8')](config[_0x4866('0x1d')][_0x493554[_0x4866('0x59')]][_0x4866('0x45')]+_0x4866('0xd9')+_0x493554['port'],_0x4866('0xda'),0x1);redisClient[_0x4866('0xd8')](config[_0x4866('0x1d')][_0x493554[_0x4866('0x59')]][_0x4866('0x45')]+_0x4866('0xdb')+_0x493554[_0x4866('0x65')],_0x493554[_0x4866('0x6c')]+'~'+_0x493554[_0x4866('0x6e')],0x1,function(_0x57f224,_0xdfe4e5){});let _0x478191=config['childPools'][_0x4866('0xe3')](_0x27ee73=>{return[_0x4866('0xe4'),config[_0x4866('0x45')]+':workers:'+_0x493554[_0x4866('0x35')],''+_0x27ee73[_0x4866('0x45')]];});redisClient[_0x4866('0xe5')](_0x478191)[_0x4866('0xe6')](function(_0x28481a,_0xe8f6ed){if(_0x28481a){log('error',logSystem,'Failed\x20to\x20clear\x20childCoins\x20from\x20parent\x20in\x20redis\x20%j\x20\x0a\x20%j',[err,_0x478191]);}});redisClient[_0x4866('0xe7')](config[_0x4866('0x45')]+':workers:'+_0x493554['login'],''+config[_0x4866('0x1d')][_0x493554['activeChildPool']][_0x4866('0x45')],_0x493554[_0x4866('0x6c')]);redisClient[_0x4866('0xe7')](config[_0x4866('0x1d')][_0x493554[_0x4866('0x59')]][_0x4866('0x45')]+_0x4866('0xe8')+_0x493554[_0x4866('0x6c')],''+config['coin'],_0x493554[_0x4866('0x35')]);}}function removeConnectedWorker(_0x1d8c4b,_0x4c9c0e){redisClient[_0x4866('0xd8')](config[_0x4866('0x45')]+':ports:'+_0x1d8c4b[_0x4866('0x68')],_0x4866('0xda'),'-1');if(mergedMining){redisClient['hincrby'](config['childPools'][_0x1d8c4b[_0x4866('0x59')]][_0x4866('0x45')]+':ports:'+_0x1d8c4b[_0x4866('0x68')],_0x4866('0xda'),'-1');redisClient[_0x4866('0xd8')](config[_0x4866('0x1d')][_0x1d8c4b['activeChildPool']][_0x4866('0x45')]+_0x4866('0xdb')+_0x1d8c4b[_0x4866('0x65')],_0x1d8c4b['childLogin']+'~'+_0x1d8c4b[_0x4866('0x6e')],0x1,function(_0x45a0d9,_0x4f9b1b){});}redisClient[_0x4866('0xd8')](config[_0x4866('0x45')]+_0x4866('0xdb')+_0x1d8c4b[_0x4866('0x64')],_0x1d8c4b[_0x4866('0x35')]+'~'+_0x1d8c4b['workerName'],-0x1,function(_0x5434ae,_0x1eaf26){if(_0x4c9c0e===_0x4866('0x93')){notifications[_0x4866('0xdc')](_0x1d8c4b[_0x4866('0x35')],_0x4866('0xe9'),{'LOGIN':_0x1d8c4b[_0x4866('0x35')],'MINER':_0x1d8c4b[_0x4866('0x35')][_0x4866('0xde')](0x0,0x7)+_0x4866('0xdf')+_0x1d8c4b[_0x4866('0x35')]['substring'](_0x1d8c4b[_0x4866('0x35')][_0x4866('0x1e')]-0x7),'IP':_0x1d8c4b['ip'][_0x4866('0xe0')](_0x4866('0xe1'),''),'PORT':_0x1d8c4b[_0x4866('0x68')],'WORKER_NAME':_0x1d8c4b[_0x4866('0x6e')]!==_0x4866('0xe')?_0x1d8c4b[_0x4866('0x6e')]:''});}else if(!_0x1eaf26||_0x1eaf26<=0x0){notifications[_0x4866('0xdc')](_0x1d8c4b[_0x4866('0x35')],_0x4866('0xea'),{'LOGIN':_0x1d8c4b[_0x4866('0x35')],'MINER':_0x1d8c4b[_0x4866('0x35')][_0x4866('0xde')](0x0,0x7)+'...'+_0x1d8c4b[_0x4866('0x35')][_0x4866('0xde')](_0x1d8c4b['login'][_0x4866('0x1e')]-0x7),'IP':_0x1d8c4b['ip'][_0x4866('0xe0')](_0x4866('0xe1'),''),'PORT':_0x1d8c4b['port'],'WORKER_NAME':_0x1d8c4b[_0x4866('0x6e')]!==_0x4866('0xe')?_0x1d8c4b[_0x4866('0x6e')]:'','LAST_HASH':utils[_0x4866('0xeb')](new Date(_0x1d8c4b[_0x4866('0x32')]),'yyyy-mm-dd\x20HH:MM:ss\x20Z')});}});}function IsBannedIp(_0x541aea){if(!banningEnabled||!bannedIPs[_0x541aea])return![];let _0x316956=bannedIPs[_0x541aea];let _0x48d71f=Date[_0x4866('0x30')]()-_0x316956;let _0x35fe21=config[_0x4866('0xd')][_0x4866('0x22')][_0x4866('0x37')]*0x3e8-_0x48d71f;if(_0x35fe21>0x0){return!![];}else{delete bannedIPs[_0x541aea];log(_0x4866('0x43'),logSystem,_0x4866('0x38'),[_0x541aea]);return![];}}function recordShareData(_0x58826e,_0x2bb809,_0x4ed7ff,_0x12b9d9,_0x28f9ac,_0x5de8d0,_0x4370e7,_0x5e6bd2){let _0x1eb853=Date['now']();let _0x3a1286=_0x1eb853/0x3e8|0x0;let _0x4f1a38=_0x5e6bd2!==null?_0x5e6bd2['coin']:config[_0x4866('0x45')];let _0x5dd249=_0x5e6bd2!==null?_0x58826e['childLogin']:_0x58826e['login'];let _0x436f08=_0x5e6bd2!==null?_0x2bb809[_0x4866('0xcb')]:_0x2bb809[_0x4866('0x46')];let _0x451068=_0x58826e['workerName'];let _0x4eedb4=_0x5e6bd2!==null?_0x58826e[_0x4866('0x63')]:_0x58826e['rewardType'];let _0x1f6540;if(slushMiningEnabled){_0x1f6540=[_0x4866('0xec'),_0x4866('0xed'),0x2,_0x4f1a38+_0x4866('0xee'),_0x4f1a38+_0x4866('0xef'),_0x5dd249,_0x2bb809['difficulty'],Date[_0x4866('0x30')](),config[_0x4866('0xd')][_0x4866('0xf0')][_0x4866('0xf1')]];}else{_0x2bb809[_0x4866('0xf2')]=_0x2bb809[_0x4866('0x47')];_0x1f6540=[_0x4866('0xf3'),_0x4f1a38+_0x4866('0xf4')+_0x4eedb4+_0x4866('0xf5'),_0x5dd249,_0x2bb809[_0x4866('0xf2')]];}let _0x2f5283=[_0x1f6540,[_0x4866('0xd8'),_0x4f1a38+_0x4866('0xf6')+_0x4eedb4+_0x4866('0xf5'),_0x5dd249,_0x2bb809[_0x4866('0x47')]],[_0x4866('0xf7'),_0x4f1a38+_0x4866('0xf8'),_0x3a1286,[_0x2bb809[_0x4866('0x47')],_0x5dd249,_0x1eb853,_0x4eedb4][_0x4866('0xf9')](':')],[_0x4866('0xd8'),_0x4f1a38+_0x4866('0xe8')+_0x5dd249,_0x4866('0xfa'),_0x2bb809[_0x4866('0x47')]],[_0x4866('0xe7'),_0x4f1a38+_0x4866('0xe8')+_0x5dd249,_0x4866('0xfb'),_0x3a1286],[_0x4866('0xfc'),_0x4f1a38+_0x4866('0xe8')+_0x5dd249,0x15180*cleanupInterval],[_0x4866('0xfc'),_0x4f1a38+':payments:'+_0x5dd249,0x15180*cleanupInterval]];if(_0x451068){_0x2f5283[_0x4866('0x57')]([_0x4866('0xf7'),_0x4f1a38+_0x4866('0xf8'),_0x3a1286,[_0x2bb809[_0x4866('0x47')],_0x5dd249+'~'+_0x451068,_0x1eb853,_0x4eedb4][_0x4866('0xf9')](':')]);_0x2f5283[_0x4866('0x57')]([_0x4866('0xd8'),_0x4f1a38+':unique_workers:'+_0x5dd249+'~'+_0x451068,_0x4866('0xfa'),_0x2bb809[_0x4866('0x47')]]);_0x2f5283[_0x4866('0x57')](['hset',_0x4f1a38+_0x4866('0xfd')+_0x5dd249+'~'+_0x451068,_0x4866('0xfb'),_0x3a1286]);_0x2f5283[_0x4866('0x57')]([_0x4866('0xfc'),_0x4f1a38+_0x4866('0xfd')+_0x5dd249+'~'+_0x451068,0x15180*cleanupInterval]);}if(_0x12b9d9){_0x2f5283[_0x4866('0x57')]([_0x4866('0xe7'),_0x4f1a38+_0x4866('0xef'),_0x4866('0xfe')+_0x4eedb4,Date[_0x4866('0x30')]()]);_0x2f5283[_0x4866('0x57')]([_0x4866('0xff'),_0x4f1a38+':scores:prop:roundCurrent',_0x4f1a38+':scores:prop:round'+_0x436f08]);_0x2f5283['push']([_0x4866('0xff'),_0x4f1a38+_0x4866('0x100'),_0x4f1a38+_0x4866('0x101')+_0x436f08]);_0x2f5283[_0x4866('0x57')]([_0x4866('0xff'),_0x4f1a38+_0x4866('0x102'),_0x4f1a38+_0x4866('0x103')+_0x436f08]);_0x2f5283[_0x4866('0x57')]([_0x4866('0xff'),_0x4f1a38+_0x4866('0x104'),_0x4f1a38+':shares_actual:solo:round'+_0x436f08]);if(_0x4eedb4===_0x4866('0x61')){_0x2f5283[_0x4866('0x57')]([_0x4866('0x105'),_0x4f1a38+_0x4866('0x106')+_0x436f08]);_0x2f5283[_0x4866('0x57')]([_0x4866('0x105'),_0x4f1a38+_0x4866('0x103')+_0x436f08]);}if(_0x4eedb4===_0x4866('0x107')){_0x2f5283[_0x4866('0x57')]([_0x4866('0x108'),_0x4f1a38+_0x4866('0x101')+_0x436f08,_0x5dd249]);_0x2f5283['push']([_0x4866('0x108'),_0x4f1a38+_0x4866('0x109')+_0x436f08,_0x5dd249]);}}redisClient[_0x4866('0xe5')](_0x2f5283)[_0x4866('0xe6')](function(_0x923390,_0x1830e8){if(_0x923390){log(_0x4866('0x17'),logSystem,_0x4866('0x10a'),[_0x923390,_0x2f5283]);return;}if(slushMiningEnabled){_0x2bb809[_0x4866('0xf2')]=parseFloat(_0x1830e8[0x0][0x0]);let _0x2edf43=parseFloat(_0x1830e8[0x0][0x1]);log(_0x4866('0x43'),logSystem,'Submitted\x20score\x20'+_0x2bb809[_0x4866('0xf2')]+_0x4866('0x10b')+_0x2bb809[_0x4866('0x47')]+_0x4866('0x10c')+_0x2edf43+'s');}if(_0x12b9d9){let _0x34fe11=_0x1830e8[_0x1830e8[_0x4866('0x1e')]-0x2];let _0x2747b9=_0x1830e8[_0x1830e8[_0x4866('0x1e')]-0x1];let _0x1b53e3=0x0;let _0x444c56=0x0;if(_0x4eedb4===_0x4866('0x107')){_0x1b53e3=_0x34fe11;_0x444c56=_0x2747b9;}if(_0x4eedb4===_0x4866('0x61')){_0x1b53e3=Object[_0x4866('0x10d')](_0x34fe11)[_0x4866('0x10e')](function(_0x309ef4,_0x54a886){return _0x309ef4+parseFloat(_0x34fe11[_0x54a886]);},0x0);_0x444c56=Object[_0x4866('0x10d')](_0x2747b9)[_0x4866('0x10e')](function(_0x4cda90,_0x538d85){return _0x4cda90+parseInt(_0x2747b9[_0x538d85]);},0x0);}redisClient[_0x4866('0xf7')](_0x4f1a38+_0x4866('0x10f'),_0x436f08,[_0x4eedb4,_0x5dd249,_0x28f9ac,Date[_0x4866('0x30')]()/0x3e8|0x0,_0x4370e7[_0x4866('0x47')],_0x444c56,_0x1b53e3][_0x4866('0xf9')](':'),function(_0x923390,_0x2f37ef){if(_0x923390){log(_0x4866('0x17'),logSystem,'Failed\x20inserting\x20block\x20candidate\x20%s\x20\x0a\x20%j',[_0x28f9ac,_0x923390]);}});notifications[_0x4866('0x110')](_0x4866('0x111'),{'HEIGHT':_0x436f08,'HASH':_0x28f9ac,'DIFFICULTY':_0x4370e7['difficulty'],'SHARES':_0x444c56,'MINER':_0x5dd249[_0x4866('0xde')](0x0,0x7)+'...'+_0x5dd249['substring'](_0x5dd249[_0x4866('0x1e')]-0x7)});}});log('info',logSystem,_0x4866('0x112'),[_0x5de8d0,_0x2bb809[_0x4866('0x47')],_0x4ed7ff,_0x5dd249,_0x58826e['ip']]);}function getShareBuffer(_0x40e06a,_0x45429b,_0x49c0a6,_0x14d6d4){let _0x3614dc=_0x14d6d4['nonce'];let _0x54bdee=_0x14d6d4[_0x4866('0xbc')];let _0x500faa=Buffer[_0x4866('0x40')](_0x49c0a6[_0x4866('0x4d')]['length']);if(!_0x40e06a[_0x4866('0x69')]){_0x49c0a6['buffer']['copy'](_0x500faa);_0x500faa[_0x4866('0x55')](_0x45429b[_0x4866('0x53')],_0x49c0a6[_0x4866('0x50')]);}else{_0x49c0a6[_0x4866('0x4d')][_0x4866('0x41')](_0x500faa);_0x500faa[_0x4866('0x55')](_0x45429b[_0x4866('0x53')],_0x49c0a6[_0x4866('0x50')]);_0x500faa[_0x4866('0x55')](_0x14d6d4[_0x4866('0xc8')],_0x45429b['clientPoolLocation']);_0x500faa[_0x4866('0x55')](_0x14d6d4[_0x4866('0xc9')],_0x45429b[_0x4866('0x54')]);}try{let _0x26ec02=utils['cnUtil'][_0x4866('0x113')](_0x500faa,Buffer['from'](_0x3614dc,_0x4866('0x3f')),cnBlobType);return _0x26ec02;}catch(_0x4464cb){log(_0x4866('0x17'),logSystem,'Can\x27t\x20get\x20share\x20buffer\x20with\x20nonce\x20%s\x20from\x20%s@%s:\x20%s',[_0x3614dc,_0x40e06a['login'],_0x40e06a['ip'],_0x4464cb]);return null;}}function processShare(_0x5e45a9,_0x39e503,_0x3059f3,_0x170a50){let _0x4230a4=getShareBuffer(_0x5e45a9,_0x39e503,_0x3059f3,_0x170a50);if(!_0x4230a4){return![];}let _0x2ab6a1=_0x170a50['result'];let _0x2dee17;let _0x4a65af;if(shareTrustEnabled&&_0x5e45a9[_0x4866('0x77')][_0x4866('0xce')]<=0x0&&_0x5e45a9[_0x4866('0x77')][_0x4866('0xd0')]<=0x0&&Math[_0x4866('0x1f')]()>_0x5e45a9['trust'][_0x4866('0xcd')]){_0x2dee17=Buffer[_0x4866('0x3c')](_0x2ab6a1,_0x4866('0x3f'));_0x4a65af=_0x4866('0x114');}else{let _0x4b272b=utils[_0x4866('0x18')][_0x4866('0x56')](_0x4230a4,cnBlobType);let _0x5ac006=_0x4b272b[0x0];_0x2dee17=cryptoNight(_0x4b272b,cnVariant);log(_0x4866('0x43'),logSystem,_0x4866('0x115'),[cnAlgorithm,cnVariant,_0x5ac006]);_0x4a65af=_0x4866('0x116');}if(_0x2dee17[_0x4866('0x1a')](_0x4866('0x3f'))!==_0x2ab6a1){log(_0x4866('0x33'),logSystem,'Bad\x20hash\x20from\x20miner\x20%s@%s',[_0x5e45a9['login'],_0x5e45a9['ip']]);return![];}let _0x3724e5=_0x2dee17[_0x4866('0x2a')]()[_0x4866('0x83')]();let _0x94868b=bignum[_0x4866('0x117')](Buffer['from'](_0x3724e5));let _0x5942d6=diff1[_0x4866('0x118')](_0x94868b);if(_0x5942d6['ge'](_0x3059f3[_0x4866('0x47')])){apiInterfaces[_0x4866('0x119')](_0x4866('0x11a'),[_0x4230a4[_0x4866('0x1a')](_0x4866('0x3f'))],function(_0x348949,_0x347a9b){if(_0x348949){log(_0x4866('0x17'),logSystem,'Error\x20submitting\x20block\x20at\x20height\x20%d\x20from\x20%s@%s,\x20share\x20type:\x20\x22%s\x22\x20-\x20%j',[_0x39e503[_0x4866('0x46')],_0x5e45a9[_0x4866('0x35')],_0x5e45a9['ip'],_0x4a65af,_0x348949]);}else{let _0x4301cf=utils['cnUtil'][_0x4866('0x11b')](_0x4230a4,cnBlobType)[_0x4866('0x1a')](_0x4866('0x3f'));log(_0x4866('0x43'),logSystem,_0x4866('0x11c'),[_0x4301cf['substr'](0x0,0x6),_0x39e503[_0x4866('0x46')],_0x5e45a9[_0x4866('0x35')],_0x5e45a9['ip'],_0x347a9b]);recordShareData(_0x5e45a9,_0x39e503,_0x5942d6['toString'](),!![],_0x4301cf,_0x4a65af,_0x3059f3,null);}});}else if(_0x5942d6['lt'](_0x39e503['difficulty'])){log(_0x4866('0x33'),logSystem,_0x4866('0x11d'),[_0x5942d6[_0x4866('0x1a')](),_0x5e45a9['login'],_0x5e45a9['ip']]);return![];}else{recordShareData(_0x5e45a9,_0x39e503,_0x5942d6[_0x4866('0x1a')](),![],null,_0x4a65af,null,null);}if(!_0x39e503[_0x4866('0xcb')])return!![];var _0x5ab162=_0x3059f3[_0x4866('0x4e')];if(_0x5ab162){if(mergedMining){let _0x12bcd9=config[_0x4866('0x1d')][_0x5e45a9[_0x4866('0x59')]];if(_0x5942d6['ge'](_0x5ab162[_0x4866('0x47')])){let _0x389574=null;try{_0x389574=utils[_0x4866('0x18')][_0x4866('0x11e')](_0x4230a4,cnBlobType,_0x5ab162[_0x4866('0x4d')]);}catch(_0x566d9a){log(_0x4866('0x17'),logSystem,_0x4866('0x11f')+_0x566d9a);}if(_0x389574===null){recordShareStatusMerged(_0x5e45a9,'invalid');}else{let _0x5a446c=_0x140d4d=>{let _0x57bd84=utils[_0x4866('0x18')][_0x4866('0x11b')](_0x389574,0x2)['toString'](_0x4866('0x3f'));log(_0x4866('0x43'),logSystem,_0x4866('0x120'),[_0x57bd84['substr'](0x0,0x6),_0x39e503[_0x4866('0xcb')],_0x5e45a9[_0x4866('0x6e')],_0x5e45a9['ip'],_0x140d4d]);recordShareData(_0x5e45a9,_0x39e503,_0x5942d6[_0x4866('0x1a')](),!![],_0x57bd84,_0x4a65af,_0x5ab162,_0x12bcd9);};apiInterfaces[_0x4866('0x119')](_0x4866('0x11a'),[_0x389574['toString'](_0x4866('0x3f'))],function(_0x4f9be5,_0x18b1c6){if(_0x4f9be5){log(_0x4866('0x17'),logSystem,_0x4866('0x121'),[_0x39e503['childHeight'],_0x5e45a9['login'],_0x5e45a9['ip'],_0x4a65af,_0x4f9be5]);}else{_0x5a446c(_0x18b1c6);}},_0x12bcd9['childDaemon']);}}else if(_0x5942d6['lt'](_0x39e503['difficulty'])){log(_0x4866('0x33'),logSystem,_0x4866('0x11d'),[_0x5942d6[_0x4866('0x1a')](),_0x5e45a9[_0x4866('0x6e')],_0x5e45a9['ip']]);return![];}else{recordShareData(_0x5e45a9,_0x39e503,_0x5942d6[_0x4866('0x1a')](),![],null,_0x4a65af,null,_0x12bcd9);}}return!![];}return!![];}let httpResponse=_0x4866('0x122');function startPoolServerTcp(_0x3acec1){log(_0x4866('0x43'),logSystem,'Clear\x20values\x20for\x20connected\x20workers\x20in\x20redis\x20database.');redisClient['del'](config[_0x4866('0x45')]+_0x4866('0xdb'));async['each'](config[_0x4866('0xd')][_0x4866('0x123')],function(_0x2b72a3,_0x31b98b){let _0x31812c=function(_0x48dc77,_0x948966,_0x1dd65d){if(!_0x948966['id']){log('warn',logSystem,_0x4866('0x124'));return;}else if(!_0x948966[_0x4866('0x125')]){log(_0x4866('0x33'),logSystem,_0x4866('0x126'));return;}else if(!_0x948966[_0x4866('0x127')]){log(_0x4866('0x33'),logSystem,_0x4866('0x128'));return;}let _0x5d5c6e=function(_0x4087ea,_0x37a913){if(!_0x48dc77[_0x4866('0x129')])return;let _0x51ee46=JSON[_0x4866('0xbf')]({'id':_0x948966['id'],'jsonrpc':_0x4866('0x12a'),'error':_0x4087ea?{'code':-0x1,'message':_0x4087ea}:null,'result':_0x37a913})+'\x0a';_0x48dc77['write'](_0x51ee46);};handleMinerMethod(_0x948966['method'],_0x948966[_0x4866('0x127')],_0x48dc77[_0x4866('0x12b')],_0x2b72a3,_0x5d5c6e,_0x1dd65d);};let _0x49febc=function(_0x58e1c0){_0x58e1c0[_0x4866('0x12c')](!![]);_0x58e1c0[_0x4866('0x12d')](_0x4866('0x12e'));let _0x356992='';let _0x38ede9=function(_0x5e762f,_0x1a34eb){if(!_0x58e1c0[_0x4866('0x129')])return;let _0x3bce8d=JSON['stringify']({'jsonrpc':'2.0','method':_0x5e762f,'params':_0x1a34eb})+'\x0a';_0x58e1c0[_0x4866('0x12f')](_0x3bce8d);};_0x58e1c0['on'](_0x4866('0x130'),function(_0x34b93c){_0x356992+=_0x34b93c;if(Buffer[_0x4866('0x131')](_0x356992,_0x4866('0x12e'))>0x2800){_0x356992=null;log(_0x4866('0x33'),logSystem,_0x4866('0x132'),[_0x58e1c0[_0x4866('0x12b')]]);_0x58e1c0[_0x4866('0x133')]();return;}if(_0x356992[_0x4866('0x4f')]('\x0a')!==-0x1){let _0x377052=_0x356992[_0x4866('0xaf')]('\x0a');let _0x5ced3b=_0x356992[_0x4866('0x2c')](-0x1)==='\x0a'?'':_0x377052[_0x4866('0x134')]();for(let _0x54f472=0x0;_0x54f472<_0x377052['length'];_0x54f472++){let _0x499b5c=_0x377052[_0x54f472];if(_0x499b5c['trim']()==='')continue;let _0x219a1a;try{_0x219a1a=JSON[_0x4866('0x135')](_0x499b5c);}catch(_0x5aa025){if(_0x499b5c[_0x4866('0x4f')]('GET\x20/')===0x0){if(_0x499b5c[_0x4866('0x4f')]('HTTP/1.1')!==-0x1){_0x58e1c0[_0x4866('0x136')](_0x4866('0x137')+httpResponse);break;}else if(_0x499b5c['indexOf'](_0x4866('0x138'))!==-0x1){_0x58e1c0['end'](_0x4866('0x138')+httpResponse);break;}}log(_0x4866('0x33'),logSystem,'Malformed\x20message\x20from\x20%s:\x20%s',[_0x58e1c0[_0x4866('0x12b')],_0x499b5c]);_0x58e1c0[_0x4866('0x133')]();break;}try{_0x31812c(_0x58e1c0,_0x219a1a,_0x38ede9);}catch(_0x47984f){log(_0x4866('0x33'),logSystem,'Malformed\x20message\x20from\x20'+_0x58e1c0[_0x4866('0x12b')]+_0x4866('0x139')+_0x499b5c);if(_0x47984f[_0x4866('0x39')])log(_0x4866('0x33'),logSystem,_0x4866('0x13a')+_0x47984f[_0x4866('0x39')]);}}_0x356992=_0x5ced3b;}})['on']('error',function(_0x5d1e0e){if(_0x5d1e0e['code']!==_0x4866('0x13b'))log('warn',logSystem,_0x4866('0x13c'),[_0x58e1c0[_0x4866('0x12b')],_0x5d1e0e]);})['on'](_0x4866('0x13d'),function(){_0x38ede9=function(){};});};if(_0x2b72a3[_0x4866('0x13e')]){if(!config[_0x4866('0xd')][_0x4866('0x13f')]){log(_0x4866('0x17'),logSystem,'Could\x20not\x20start\x20server\x20listening\x20on\x20port\x20%d\x20(SSL):\x20SSL\x20certificate\x20not\x20configured',[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b(!![]);}else if(!config['poolServer'][_0x4866('0x140')]){log(_0x4866('0x17'),logSystem,_0x4866('0x141'),[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b(!![]);}else if(!config[_0x4866('0xd')][_0x4866('0x142')]){log(_0x4866('0x17'),logSystem,_0x4866('0x143'),[_0x2b72a3['port']]);_0x31b98b(!![]);}else if(!fs[_0x4866('0x144')](config[_0x4866('0xd')][_0x4866('0x13f')])){log('error',logSystem,_0x4866('0x145'),[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b(!![]);}else if(!fs['existsSync'](config[_0x4866('0xd')][_0x4866('0x140')])){log(_0x4866('0x17'),logSystem,_0x4866('0x146'),[_0x2b72a3['port']]);_0x31b98b(!![]);}else if(!fs[_0x4866('0x144')](config[_0x4866('0xd')]['sslCA'])){log(_0x4866('0x17'),logSystem,_0x4866('0x147'),[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b(!![]);}else{let _0x2db028={'key':fs[_0x4866('0x148')](config['poolServer'][_0x4866('0x140')]),'cert':fs[_0x4866('0x148')](config[_0x4866('0xd')][_0x4866('0x13f')]),'ca':fs[_0x4866('0x148')](config[_0x4866('0xd')][_0x4866('0x142')])};tls[_0x4866('0x149')](_0x2db028,_0x49febc)[_0x4866('0x14a')](_0x2b72a3['port'],function(_0x4b20b1,_0x5868bc){if(_0x4b20b1){log(_0x4866('0x17'),logSystem,_0x4866('0x14b'),[_0x2b72a3['port'],_0x4b20b1]);_0x31b98b(!![]);return;}log('info',logSystem,_0x4866('0x14c'),[_0x2b72a3[_0x4866('0x68')]]);redisClient[_0x4866('0x14d')](config[_0x4866('0x45')]+':ports:'+_0x2b72a3[_0x4866('0x68')]);redisClient[_0x4866('0xe7')](config[_0x4866('0x45')]+_0x4866('0xd9')+_0x2b72a3[_0x4866('0x68')],_0x4866('0x68'),_0x2b72a3[_0x4866('0x68')]);log(_0x4866('0x43'),logSystem,_0x4866('0x14e'),[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b();});}}else{net[_0x4866('0x149')](_0x49febc)[_0x4866('0x14a')](_0x2b72a3['port'],function(_0x20ae03,_0x39ce60){if(_0x20ae03){log(_0x4866('0x17'),logSystem,_0x4866('0x14f'),[_0x2b72a3[_0x4866('0x68')],_0x20ae03]);_0x31b98b(!![]);return;}log('info',logSystem,_0x4866('0x150'),[_0x2b72a3[_0x4866('0x68')]]);redisClient['del'](config[_0x4866('0x45')]+_0x4866('0xd9')+_0x2b72a3[_0x4866('0x68')]);redisClient['hset'](config['coin']+_0x4866('0xd9')+_0x2b72a3[_0x4866('0x68')],_0x4866('0x68'),_0x2b72a3[_0x4866('0x68')]);log(_0x4866('0x43'),logSystem,_0x4866('0x151'),[_0x2b72a3[_0x4866('0x68')]]);_0x31b98b();});}},function(_0x1930ca){if(_0x1930ca)_0x3acec1(![]);else _0x3acec1(!![]);});}(function init(_0x346d22){async[_0x4866('0x152')]([function(_0x4db09a){if(!poolStarted){startPoolServerTcp(function(_0xc5df7c){poolStarted=!![];});setTimeout(init,0x3e8,_0x346d22);return;}_0x4db09a(!![]);}],function(_0x2074f4){if(_0x346d22===!![]){setTimeout(function(){init(!![]);},config[_0x4866('0xd')][_0x4866('0x153')]);}});}());